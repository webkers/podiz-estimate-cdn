var xs=Object.defineProperty;var Us=(r,e,t)=>e in r?xs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var st=(r,e,t)=>(Us(r,typeof e!="symbol"?e+"":e,t),t);function Ds(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in r)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function j(){}const _s=r=>r;function bt(r,e){for(const t in e)r[t]=e[t];return r}function Ns(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function gs(r){return r()}function Ut(){return Object.create(null)}function H(r){r.forEach(gs)}function wt(r){return typeof r=="function"}function ve(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let qe;function Dt(r,e){return r===e?!0:(qe||(qe=document.createElement("a")),qe.href=e,r===qe.href)}function Fs(r){return Object.keys(r).length===0}function ms(r,...e){if(r==null){for(const s of e)s(void 0);return j}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Z(r){let e;return ms(r,t=>e=t)(),e}function rt(r,e,t){r.$$.on_destroy.push(ms(e,t))}function kt(r,e,t,s){if(r){const n=vs(r,e,t,s);return r[0](n)}}function vs(r,e,t,s){return r[1]&&s?bt(t.ctx.slice(),r[1](s(e))):t.ctx}function $t(r,e,t,s){if(r[2]&&s){const n=r[2](s(t));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|n[a];return i}return e.dirty|n}return e.dirty}function St(r,e,t,s,n,i){if(n){const o=vs(e,t,s,i);r.p(o,n)}}function Ot(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function Me(r,e,t){return r.set(t),e}const ys=typeof window<"u";let qs=ys?()=>window.performance.now():()=>Date.now(),Tt=ys?r=>requestAnimationFrame(r):j;const fe=new Set;function bs(r){fe.forEach(e=>{e.c(r)||(fe.delete(e),e.f())}),fe.size!==0&&Tt(bs)}function Ms(r){let e;return fe.size===0&&Tt(bs),{promise:new Promise(t=>{fe.add(e={c:r,f:t})}),abort(){fe.delete(e)}}}function y(r,e){r.appendChild(e)}function ws(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function Bs(r){const e=$("style");return e.textContent="/* empty */",zs(ws(r),e),e.sheet}function zs(r,e){return y(r.head||r,e),e.sheet}function R(r,e,t){r.insertBefore(e,t||null)}function C(r){r.parentNode&&r.parentNode.removeChild(r)}function $(r){return document.createElement(r)}function pe(r){return document.createTextNode(r)}function x(){return pe(" ")}function re(){return pe("")}function Re(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function S(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Js(r){return Array.from(r.childNodes)}function Nt(r,e){e=""+e,r.data!==e&&(r.data=e)}function Gs(r,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:s})}function Ke(r,e){return new r(e)}const He=new Map;let Ve=0;function Ks(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Hs(r,e){const t={stylesheet:Bs(e),rules:{}};return He.set(r,t),t}function Ft(r,e,t,s,n,i,o,a=0){const c=16.666/s;let l=`{
`;for(let g=0;g<=1;g+=c){const w=e+(t-e)*i(g);l+=g*100+`%{${o(w,1-w)}}
`}const u=l+`100% {${o(t,1-t)}}
}`,h=`__svelte_${Ks(u)}_${a}`,d=ws(r),{stylesheet:f,rules:p}=He.get(d)||Hs(d,r);p[h]||(p[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const _=r.style.animation||"";return r.style.animation=`${_?`${_}, `:""}${h} ${s}ms linear ${n}ms 1 both`,Ve+=1,h}function Vs(r,e){const t=(r.style.animation||"").split(", "),s=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=t.length-s.length;n&&(r.style.animation=s.join(", "),Ve-=n,Ve||Ws())}function Ws(){Tt(()=>{Ve||(He.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&C(e)}),He.clear())})}let Ae;function B(r){Ae=r}function ks(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function $s(r){ks().$$.on_mount.push(r)}const he=[],dt=[];let _e=[];const ft=[],Qs=Promise.resolve();let pt=!1;function Xs(){pt||(pt=!0,Qs.then(Et))}function ge(r){_e.push(r)}function Ys(r){ft.push(r)}const nt=new Set;let oe=0;function Et(){if(oe!==0)return;const r=Ae;do{try{for(;oe<he.length;){const e=he[oe];oe++,B(e),Zs(e.$$)}}catch(e){throw he.length=0,oe=0,e}for(B(null),he.length=0,oe=0;dt.length;)dt.pop()();for(let e=0;e<_e.length;e+=1){const t=_e[e];nt.has(t)||(nt.add(t),t())}_e.length=0}while(he.length);for(;ft.length;)ft.pop()();pt=!1,nt.clear(),B(r)}function Zs(r){if(r.fragment!==null){r.update(),H(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ge)}}function er(r){const e=[],t=[];_e.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),_e=e}let ke;function tr(){return ke||(ke=Promise.resolve(),ke.then(()=>{ke=null})),ke}function it(r,e,t){r.dispatchEvent(Gs(`${e?"intro":"outro"}${t}`))}const Ge=new Set;let z;function V(){z={r:0,c:[],p:z}}function W(){z.r||H(z.c),z=z.p}function T(r,e){r&&r.i&&(Ge.delete(r),r.i(e))}function P(r,e,t,s){if(r&&r.o){if(Ge.has(r))return;Ge.add(r),z.c.push(()=>{Ge.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}const sr={duration:0};function We(r,e,t,s){let i=e(r,t,{direction:"both"}),o=s?0:1,a=null,c=null,l=null,u;function h(){l&&Vs(r,l)}function d(p,_){const g=p.b-o;return _*=Math.abs(g),{a:o,b:p.b,d:g,duration:_,start:p.start,end:p.start+_,group:p.group}}function f(p){const{delay:_=0,duration:g=300,easing:w=_s,tick:b=j,css:E}=i||sr,k={start:qs()+_,b:p};p||(k.group=z,z.r+=1),"inert"in r&&(p?u!==void 0&&(r.inert=u):(u=r.inert,r.inert=!0)),a||c?c=k:(E&&(h(),l=Ft(r,o,p,g,_,w,E)),p&&b(0,1),a=d(k,g),ge(()=>it(r,p,"start")),Ms(U=>{if(c&&U>c.start&&(a=d(c,g),c=null,it(r,a.b,"start"),E&&(h(),l=Ft(r,o,a.b,a.duration,0,w,i.css))),a){if(U>=a.end)b(o=a.b,1-o),it(r,a.b,"end"),c||(a.b?h():--a.group.r||H(a.group.c)),a=null;else if(U>=a.start){const we=U-a.start;o=a.a+a.d*w(we/a.duration),b(o,1-o)}}return!!(a||c)}))}return{run(p){wt(i)?tr().then(()=>{i=i({direction:p?"in":"out"}),f(p)}):f(p)},end(){h(),a=c=null}}}function qt(r,e){const t=e.token={};function s(n,i,o,a){if(e.token!==t)return;e.resolved=a;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=a);const l=n&&(e.current=n)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==i&&h&&(V(),P(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),W())}):e.block.d(1),l.c(),T(l,1),l.m(e.mount(),e.anchor),u=!0),e.block=l,e.blocks&&(e.blocks[i]=l),u&&Et()}if(Ns(r)){const n=ks();if(r.then(i=>{B(n),s(e.then,1,e.value,i),B(null)},i=>{if(B(n),s(e.catch,2,e.error,i),B(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,r),!0;e.resolved=r}}function rr(r,e,t){const s=e.slice(),{resolved:n}=r;r.current===r.then&&(s[r.value]=n),r.current===r.catch&&(s[r.error]=n),r.block.p(s,t)}function Mt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function nr(r,e){P(r,1,1,()=>{e.delete(r.key)})}function ir(r,e,t,s,n,i,o,a,c,l,u,h){let d=r.length,f=i.length,p=d;const _={};for(;p--;)_[r[p].key]=p;const g=[],w=new Map,b=new Map,E=[];for(p=f;p--;){const A=h(n,i,p),F=t(A);let q=o.get(F);q?s&&E.push(()=>q.p(A,e)):(q=l(F,A),q.c()),w.set(F,g[p]=q),F in _&&b.set(F,Math.abs(p-_[F]))}const k=new Set,U=new Set;function we(A){T(A,1),A.m(a,u),o.set(A.key,A),u=A.first,f--}for(;d&&f;){const A=g[f-1],F=r[d-1],q=A.key,Fe=F.key;A===F?(u=A.first,d--,f--):w.has(Fe)?!o.has(q)||k.has(q)?we(A):U.has(Fe)?d--:b.get(q)>b.get(Fe)?(U.add(q),we(A)):(k.add(Fe),d--):(c(F,o),d--)}for(;d--;){const A=r[d];w.has(A.key)||c(A,o)}for(;f;)we(g[f-1]);return H(E),g}function Qe(r,e){const t={},s={},n={$$scope:1};let i=r.length;for(;i--;){const o=r[i],a=e[i];if(a){for(const c in o)c in a||(s[c]=1);for(const c in a)n[c]||(t[c]=a[c],n[c]=1);r[i]=a}else for(const c in o)n[c]=1}for(const o in s)o in t||(t[o]=void 0);return t}function Xe(r){return typeof r=="object"&&r!==null?r:{}}function or(r,e,t){const s=r.$$.props[e];s!==void 0&&(r.$$.bound[s]=t,t(r.$$.ctx[s]))}function me(r){r&&r.c()}function ne(r,e,t){const{fragment:s,after_update:n}=r.$$;s&&s.m(e,t),ge(()=>{const i=r.$$.on_mount.map(gs).filter(wt);r.$$.on_destroy?r.$$.on_destroy.push(...i):H(i),r.$$.on_mount=[]}),n.forEach(ge)}function ie(r,e){const t=r.$$;t.fragment!==null&&(er(t.after_update),H(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ar(r,e){r.$$.dirty[0]===-1&&(he.push(r),Xs(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function xe(r,e,t,s,n,i,o=null,a=[-1]){const c=Ae;B(r);const l=r.$$={fragment:null,ctx:[],props:i,update:j,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ut(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=t?t(r,e.props||{},(h,d,...f)=>{const p=f.length?f[0]:d;return l.ctx&&n(l.ctx[h],l.ctx[h]=p)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](p),u&&ar(r,h)),d}):[],l.update(),u=!0,H(l.before_update),l.fragment=s?s(l.ctx):!1,e.target){if(e.hydrate){const h=Js(e.target);l.fragment&&l.fragment.l(h),h.forEach(C)}else l.fragment&&l.fragment.c();e.intro&&T(r.$$.fragment),ne(r,e.target,e.anchor),Et()}B(c)}class Ue{constructor(){st(this,"$$");st(this,"$$set")}$destroy(){ie(this,1),this.$destroy=j}$on(e,t){if(!wt(t))return j;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Fs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const cr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(cr);const ae=[];function Ze(r,e=j){let t;const s=new Set;function n(a){if(ve(r,a)&&(r=a,t)){const c=!ae.length;for(const l of s)l[1](),ae.push(l,r);if(c){for(let l=0;l<ae.length;l+=2)ae[l][0](ae[l+1]);ae.length=0}}}function i(a){n(a(r))}function o(a,c=j){const l=[a,c];return s.add(l),s.size===1&&(t=e(n,i)||j),a(r),()=>{s.delete(l),s.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:o}}const ee=Ze(!1),te=Ze(null),se=Ze([]),Ss=Ze(null);function lr(r=1){var s,n;const e=Z(se).length,t=Z(se)[e-1];return Z(te)||(s=t==null?void 0:t.callbacks)!=null&&s.onBeforeClose&&((n=t==null?void 0:t.callbacks)==null?void 0:n.onBeforeClose())===!1?!1:(Z(ee)&&e>0&&te.set(!0),ee.set(!1),Ss.set("pop"),ur(r),!0)}function jt(){return lr(1)}function Os(r,e,t){Z(te)||(Ss.set("push"),Z(ee)&&Z(se).length&&te.set(!0),ee.set(!1),t!=null&&t.replace?se.update(s=>[...s.slice(0,s.length-1),{component:r,props:e}]):se.update(s=>[...s,{component:r,props:e}]))}function ur(r=1){se.update(e=>e.slice(0,Math.max(0,e.length-r)))}function Bt(r,e,t){const s=r.slice();return s[9]=e[t],s[11]=t,s}const hr=r=>({}),zt=r=>({}),dr=r=>({}),Jt=r=>({});function Gt(r){let e;const t=r[4].backdrop,s=kt(t,r,r[3],Jt);return{c(){s&&s.c()},m(n,i){s&&s.m(n,i),e=!0},p(n,i){s&&s.p&&(!e||i&8)&&St(s,t,n,n[3],e?$t(t,n[3],i,dr):Ot(n[3]),Jt)},i(n){e||(T(s,n),e=!0)},o(n){P(s,n),e=!1},d(n){s&&s.d(n)}}}function fr(r){let e,t,s;const n=[{isOpen:r[11]===r[0].length-1&&!r[1]},r[9].props];var i=r[9].component;function o(a,c){let l={};if(c!==void 0&&c&3)l=Qe(n,[{isOpen:a[11]===a[0].length-1&&!a[1]},c&1&&Xe(a[9].props)]);else for(let u=0;u<n.length;u+=1)l=bt(l,n[u]);return{props:l}}return i&&(e=Ke(i,o(r)),e.$on("introstart",r[7]),e.$on("outroend",r[8])),{c(){e&&me(e.$$.fragment),t=re()},m(a,c){e&&ne(e,a,c),R(a,t,c),s=!0},p(a,c){if(c&1&&i!==(i=a[9].component)){if(e){V();const l=e;P(l.$$.fragment,1,0,()=>{ie(l,1)}),W()}i?(e=Ke(i,o(a,c)),e.$on("introstart",a[7]),e.$on("outroend",a[8]),me(e.$$.fragment),T(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}else if(i){const l=c&3?Qe(n,[{isOpen:a[11]===a[0].length-1&&!a[1]},c&1&&Xe(a[9].props)]):{};e.$set(l)}},i(a){s||(e&&T(e.$$.fragment,a),s=!0)},o(a){e&&P(e.$$.fragment,a),s=!1},d(a){a&&C(t),e&&ie(e,a)}}}function pr(r){let e,t,s,n={ctx:r,current:null,token:null,hasCatch:!1,pending:mr,then:gr,catch:_r,value:12,blocks:[,,,]};return qt(t=Ht(r[9].component),n),{c(){e=re(),n.block.c()},m(i,o){R(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,s=!0},p(i,o){r=i,n.ctx=r,o&1&&t!==(t=Ht(r[9].component))&&qt(t,n)||rr(n,r,o)},i(i){s||(T(n.block),s=!0)},o(i){for(let o=0;o<3;o+=1){const a=n.blocks[o];P(a)}s=!1},d(i){i&&C(e),n.block.d(i),n.token=null,n=null}}}function _r(r){return{c:j,m:j,p:j,i:j,o:j,d:j}}function gr(r){let e,t,s;const n=[{isOpen:r[11]===r[0].length-1&&!r[1]},r[9].props];var i=r[12];function o(a,c){let l={};if(c!==void 0&&c&3)l=Qe(n,[{isOpen:a[11]===a[0].length-1&&!a[1]},c&1&&Xe(a[9].props)]);else for(let u=0;u<n.length;u+=1)l=bt(l,n[u]);return{props:l}}return i&&(e=Ke(i,o(r)),e.$on("introstart",r[5]),e.$on("outroend",r[6])),{c(){e&&me(e.$$.fragment),t=x()},m(a,c){e&&ne(e,a,c),R(a,t,c),s=!0},p(a,c){if(c&1&&i!==(i=a[12])){if(e){V();const l=e;P(l.$$.fragment,1,0,()=>{ie(l,1)}),W()}i?(e=Ke(i,o(a,c)),e.$on("introstart",a[5]),e.$on("outroend",a[6]),me(e.$$.fragment),T(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}else if(i){const l=c&3?Qe(n,[{isOpen:a[11]===a[0].length-1&&!a[1]},c&1&&Xe(a[9].props)]):{};e.$set(l)}},i(a){s||(e&&T(e.$$.fragment,a),s=!0)},o(a){e&&P(e.$$.fragment,a),s=!1},d(a){a&&C(t),e&&ie(e,a)}}}function mr(r){let e,t;const s=r[4].loading,n=kt(s,r,r[3],zt);return{c(){n&&n.c(),e=x()},m(i,o){n&&n.m(i,o),R(i,e,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&St(n,s,i,i[3],t?$t(s,i[3],o,hr):Ot(i[3]),zt)},i(i){t||(T(n,i),t=!0)},o(i){P(n,i),t=!1},d(i){i&&C(e),n&&n.d(i)}}}function Kt(r,e){let t,s,n,i,o,a;const c=[pr,fr],l=[];function u(h,d){return d&1&&(s=null),s==null&&(s=!!br(h[9].component)),s?0:1}return n=u(e,-1),i=l[n]=c[n](e),{key:r,first:null,c(){t=re(),i.c(),o=re(),this.first=t},m(h,d){R(h,t,d),l[n].m(h,d),R(h,o,d),a=!0},p(h,d){e=h;let f=n;n=u(e,d),n===f?l[n].p(e,d):(V(),P(l[f],1,1,()=>{l[f]=null}),W(),i=l[n],i?i.p(e,d):(i=l[n]=c[n](e),i.c()),T(i,1),i.m(o.parentNode,o))},i(h){a||(T(i),a=!0)},o(h){P(i),a=!1},d(h){h&&(C(t),C(o)),l[n].d(h)}}}function vr(r){let e=[],t=new Map,s,n,i=Mt(r[0]);const o=a=>a[11];for(let a=0;a<i.length;a+=1){let c=Bt(r,i,a),l=o(c);t.set(l,e[a]=Kt(l,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=re()},m(a,c){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,c);R(a,s,c),n=!0},p(a,c){c&15&&(i=Mt(a[0]),V(),e=ir(e,c,o,1,a,i,t,s.parentNode,nr,Kt,s,Bt),W())},i(a){if(!n){for(let c=0;c<i.length;c+=1)T(e[c]);n=!0}},o(a){for(let c=0;c<e.length;c+=1)P(e[c]);n=!1},d(a){a&&C(s);for(let c=0;c<e.length;c+=1)e[c].d(a)}}}function yr(r){let e,t,s=r[0].length>0&&Gt(r);const n=r[4].default,i=kt(n,r,r[3],null),o=i||vr(r);return{c(){s&&s.c(),e=x(),o&&o.c()},m(a,c){s&&s.m(a,c),R(a,e,c),o&&o.m(a,c),t=!0},p(a,[c]){a[0].length>0?s?(s.p(a,c),c&1&&T(s,1)):(s=Gt(a),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(V(),P(s,1,1,()=>{s=null}),W()),i?i.p&&(!t||c&8)&&St(i,n,a,a[3],t?$t(n,a[3],c,null):Ot(a[3]),null):o&&o.p&&(!t||c&15)&&o.p(a,t?c:-1)},i(a){t||(T(s),T(o,a),t=!0)},o(a){P(s),P(o,a),t=!1},d(a){a&&C(e),s&&s.d(a),o&&o.d(a)}}}function br(r){return typeof r.prototype>"u"}async function Ht(r){return r().then(e=>e.default)}function wr(r,e,t){let s,n,i;rt(r,se,d=>t(0,s=d)),rt(r,te,d=>t(1,n=d)),rt(r,ee,d=>t(2,i=d));let{$$slots:o={},$$scope:a}=e;const c=()=>{Me(ee,i=!0,i)},l=()=>{Me(te,n=!1,n)},u=()=>{Me(ee,i=!0,i)},h=()=>{Me(te,n=!1,n)};return r.$$set=d=>{"$$scope"in d&&t(3,a=d.$$scope)},[s,n,i,a,o,c,l,u,h]}class kr extends Ue{constructor(e){super(),xe(this,e,wr,yr,ve,{})}}function Ye(r,{delay:e=0,duration:t=400,easing:s=_s}={}){const n=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:i=>`opacity: ${i*n}`}}async function $r(r){return new Promise(function(e,t){CAFE24API&&CAFE24API.get(`/api/v2/products/${r}?embed=variants,options,additionalimages`,function(s,n){return s&&(console.log(s),t(s)),e(n)})})}function Vt(r){let e,t,s,n,i,o=r[0].product_name+"",a,c,l,u=parseInt(r[0].price).toLocaleString()+"",h,d,f=r[0].list_image&&Wt(r);return{c(){e=$("div"),t=$("div"),f&&f.c(),s=x(),n=$("div"),i=$("div"),a=pe(o),c=x(),l=$("div"),h=pe(u),d=pe("원"),S(t,"class","thumbnail svelte-3r9xho"),S(i,"class","product-name svelte-3r9xho"),S(l,"class","product-price primary-text svelte-3r9xho"),S(n,"class","info svelte-3r9xho"),S(e,"class","product-info svelte-3r9xho")},m(p,_){R(p,e,_),y(e,t),f&&f.m(t,null),y(e,s),y(e,n),y(n,i),y(i,a),y(n,c),y(n,l),y(l,h),y(l,d)},p(p,_){p[0].list_image?f?f.p(p,_):(f=Wt(p),f.c(),f.m(t,null)):f&&(f.d(1),f=null),_&1&&o!==(o=p[0].product_name+"")&&Nt(a,o),_&1&&u!==(u=parseInt(p[0].price).toLocaleString()+"")&&Nt(h,u)},d(p){p&&C(e),f&&f.d()}}}function Wt(r){let e,t;return{c(){e=$("img"),Dt(e.src,t=r[0].list_image)||S(e,"src",t),S(e,"alt",""),S(e,"class","svelte-3r9xho")},m(s,n){R(s,e,n)},p(s,n){n&1&&!Dt(e.src,t=s[0].list_image)&&S(e,"src",t)},d(s){s&&C(e)}}}function Sr(r){let e,t=r[0]&&Vt(r);return{c(){t&&t.c(),e=re()},m(s,n){t&&t.m(s,n),R(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=Vt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:j,o:j,d(s){s&&C(e),t&&t.d(s)}}}function Or(r,e,t){let{productNo:s}=e;console.log({productNo:s});let n=null;return $s(async()=>{if(s){{const i=await $r(s);t(0,n=i.product)}console.log({product:n})}}),r.$$set=i=>{"productNo"in i&&t(1,s=i.productNo)},[n,s]}class Tr extends Ue{constructor(e){super(),xe(this,e,Or,Sr,ve,{productNo:1})}}function Er(r){let e;return{c(){e=$("div"),e.textContent="Product Search"},m(t,s){R(t,e,s)},p:j,i:j,o:j,d(t){t&&C(e)}}}function jr(r){let e,t,s;function n(o){r[1](o)}let i={};return r[0].product_no!==void 0&&(i.productNo=r[0].product_no),e=new Tr({props:i}),dt.push(()=>or(e,"productNo",n)),{c(){me(e.$$.fragment)},m(o,a){ne(e,o,a),s=!0},p(o,a){const c={};!t&&a&1&&(t=!0,c.productNo=o[0].product_no,Ys(()=>t=!1)),e.$set(c)},i(o){s||(T(e.$$.fragment,o),s=!0)},o(o){P(e.$$.fragment,o),s=!1},d(o){ie(e,o)}}}function Pr(r){let e,t,s,n,i,o,a,c,l,u,h,d,f,p;const _=[jr,Er],g=[];function w(b,E){return b[0]?0:1}return o=w(r),a=g[o]=_[o](r),{c(){e=$("div"),t=$("div"),s=$("h2"),s.textContent="상품선택",n=x(),i=$("div"),a.c(),c=x(),l=$("div"),u=$("button"),u.textContent="OK",S(l,"class","actions svelte-1qyjsm2"),S(i,"class","pode-card"),S(t,"class","contents svelte-1qyjsm2"),S(e,"role","dialog"),S(e,"class","modal svelte-1qyjsm2")},m(b,E){R(b,e,E),y(e,t),y(t,s),y(t,n),y(t,i),g[o].m(i,null),y(i,c),y(i,l),y(l,u),d=!0,f||(p=Re(u,"click",r[2]),f=!0)},p(b,[E]){let k=o;o=w(b),o===k?g[o].p(b,E):(V(),P(g[k],1,1,()=>{g[k]=null}),W(),a=g[o],a?a.p(b,E):(a=g[o]=_[o](b),a.c()),T(a,1),a.m(i,c))},i(b){d||(T(a),ge(()=>{d&&(h||(h=We(e,Ye,{duration:150},!0)),h.run(1))}),d=!0)},o(b){P(a),h||(h=We(e,Ye,{duration:150},!1)),h.run(0),d=!1},d(b){b&&C(e),g[o].d(),b&&h&&h.end(),f=!1,p()}}}function Cr(r,e,t){let{product:s=null}=e;function n(o){r.$$.not_equal(s.product_no,o)&&(s.product_no=o,t(0,s))}const i=()=>jt();return r.$$set=o=>{"product"in o&&t(0,s=o.product)},[s,n,i]}class Rr extends Ue{constructor(e){super(),xe(this,e,Cr,Pr,ve,{product:0})}}function Qt(r){let e,t,s,n,i,o,a,c,l,u,h,d,f,p,_;return{c(){e=$("div"),t=$("div"),s=$("h2"),s.textContent="견적서 작성",n=x(),i=$("div"),o=pe(`contents\r
          `),a=$("div"),c=$("button"),c.textContent="상품선택",l=x(),u=$("div"),h=$("button"),h.textContent="OK",S(c,"type","button"),S(c,"class","pode-btn btn-netural btn-wide product-select svelte-168k79i"),S(a,"class","actions svelte-168k79i"),S(i,"class","pode-card"),S(u,"class","actions svelte-168k79i"),S(t,"class","contents svelte-168k79i"),S(e,"role","dialog"),S(e,"class","modal svelte-168k79i")},m(g,w){R(g,e,w),y(e,t),y(t,s),y(t,n),y(t,i),y(i,o),y(i,a),y(a,c),y(t,l),y(t,u),y(u,h),f=!0,p||(_=[Re(c,"click",r[1]),Re(h,"click",jt)],p=!0)},p:j,i(g){f||(ge(()=>{f&&(d||(d=We(e,Ye,{duration:150},!0)),d.run(1))}),f=!0)},o(g){d||(d=We(e,Ye,{duration:150},!1)),d.run(0),f=!1},d(g){g&&C(e),g&&d&&d.end(),p=!1,H(_)}}}function Ar(r){let e,t,s=r[0]&&Qt(r);return{c(){s&&s.c(),e=re()},m(n,i){s&&s.m(n,i),R(n,e,i),t=!0},p(n,[i]){n[0]?s?(s.p(n,i),i&1&&T(s,1)):(s=Qt(n),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(V(),P(s,1,1,()=>{s=null}),W())},i(n){t||(T(s),t=!0)},o(n){P(s),t=!1},d(n){n&&C(e),s&&s.d(n)}}}function Ir(r,e,t){let{isOpen:s}=e,{product:n=null}=e;function i(){Os(Rr,{product:n})}return r.$$set=o=>{"isOpen"in o&&t(0,s=o.isOpen),"product"in o&&t(2,n=o.product)},[s,i,n]}class Lr extends Ue{constructor(e){super(),xe(this,e,Ir,Ar,ve,{isOpen:0,product:2})}}const xr="modulepreload",Ur=function(r){return"/"+r},Xt={},De=function(e,t,s){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Ur(i),i in Xt)return;Xt[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=n.length-1;u>=0;u--){const h=n[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":xr,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Dr=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>De(()=>Promise.resolve().then(()=>Ne),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Pt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Nr extends Pt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fr extends Pt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qr extends Pt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mr=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};class Br{constructor(e,{headers:t={},customFetch:s}={}){this.url=e,this.headers=t,this.fetch=Dr(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Mr(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let a={},c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const l=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:c}).catch(f=>{throw new Nr(f)}),u=l.headers.get("x-relay-error");if(u&&u==="true")throw new Fr(l);if(!l.ok)throw new qr(l);let h=((s=l.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield l.json():h==="application/octet-stream"?d=yield l.blob():h==="multipart/form-data"?d=yield l.formData():d=yield l.text(),{data:d,error:null}}catch(n){return{data:null,error:n}}})}}var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _t={exports:{}};(function(r,e){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Yt<"u")return Yt;throw new Error("unable to locate global object")},s=t();r.exports=e=s.fetch,s.fetch&&(e.default=s.fetch.bind(s)),e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response})(_t,_t.exports);var Ct=_t.exports;const Rt=zr(Ct),Ne=Ds({__proto__:null,default:Rt},[Ct]);class Jr{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rt:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,h=null,d=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");_&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const _=await i.text();try{l=JSON.parse(_),Array.isArray(l)&&i.status===404&&(u=[],l=null,d=200,f="OK")}catch{i.status===404&&_===""?(d=204,f="No Content"):l={message:_}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("Results contain 0 rows"))&&(l=null,d=200,f="OK"),l&&this.shouldThrowOnError)throw l}return{error:l,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class Gr extends Jr{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n}={}){const i=n?`${n}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const s=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:s}={}){const n=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class de extends Gr{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=t.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t}={}){const s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Kr{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new de({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new de({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new de({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new de({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new de({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Hr="1.8.4",Vr={"X-Client-Info":`postgrest-js/${Hr}`};class At{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Vr),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Kr(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new At(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,count:n}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;s?(i="HEAD",Object.entries(t).forEach(([l,u])=>{o.searchParams.append(l,`${u}`)})):(i="POST",a=t);const c=Object.assign({},this.headers);return n&&(c.Prefer=`count=${n}`),new de({method:i,url:o,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}var ot,Zt;function Wr(){if(Zt)return ot;Zt=1;var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return ot=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}(),ot}const Qr="websocket",Xr="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Yr=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Zr="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",en=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],tn="1.0.34",sn={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},rn="https://github.com/theturtle32/WebSocket-Node",nn={node:">=4.0.0"},on={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},an={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},cn={verbose:!1},ln={test:"tape test/unit/*.js",gulp:"gulp"},un="index",hn={lib:"./lib"},dn="lib/browser.js",fn="Apache-2.0",pn={name:Qr,description:Xr,keywords:Yr,author:Zr,contributors:en,version:tn,repository:sn,homepage:rn,engines:nn,dependencies:on,devDependencies:an,config:cn,scripts:ln,main:un,directories:hn,browser:dn,license:fn};var _n=pn.version,X;if(typeof globalThis=="object")X=globalThis;else try{X=Wr()}catch{}finally{if(!X&&typeof window<"u"&&(X=window),!X)throw new Error("Could not determine global this")}var Ie=X.WebSocket||X.MozWebSocket,gn=_n;function Ts(r,e){var t;return e?t=new Ie(r,e):t=new Ie(r),t}Ie&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(Ts,r,{get:function(){return Ie[r]}})});var mn={w3cwebsocket:Ie?Ts:null,version:gn};const vn="2.8.0",yn={"X-Client-Info":`realtime-js/${vn}`},bn="1.0.0",Es=1e4,wn=1e3;var je;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(je||(je={}));var L;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(L||(L={}));var N;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(N||(N={}));var gt;(function(r){r.websocket="websocket"})(gt||(gt={}));var Y;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Y||(Y={}));class js{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class kn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+n));o=o+n;const c=s.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class at{constructor(e,t,s={},n=Es){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var es;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(es||(es={}));class Pe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pe.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Pe.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Pe.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const d=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),p=u.filter(g=>f.indexOf(g.presence_ref)<0),_=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[l]=p),_.length>0&&(c[l]=_)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}s(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,n(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var O;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(O||(O={}));const ts=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=$n(o,r,e,n),i),{})},$n=(r,e,t,s)=>{const n=e.find(a=>a.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?Ps(i,o):mt(o)},Ps=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return En(e,t)}switch(r){case O.bool:return Sn(e);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return On(e);case O.json:case O.jsonb:return Tn(e);case O.timestamp:return jn(e);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:return mt(e);default:return mt(e)}},mt=r=>r,Sn=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},On=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Tn=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},En=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Ps(e,a))}return r},jn=r=>typeof r=="string"?r.replace(" ","T"):r;var ss;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ss||(ss={}));var rs;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(rs||(rs={}));var ns;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ns||(ns={}));class It{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=L.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new at(this,N.join,this.params,this.timeout),this.rejoinTimer=new js(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=L.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=L.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=L.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=L.errored,this.rejoinTimer.scheduleTimeout())}),this._on(N.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Pe(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const a={},c={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(l=>l.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,f=[];for(let p=0;p<d;p++){const _=h[p],{filter:{event:g,schema:w,table:b,filter:E}}=_,k=l&&l[p];if(k&&k.event===g&&k.schema===w&&k.table===b&&k.filter===E)f.push(Object.assign(Object.assign({},_),{id:k.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{apikey:(s=this.socket.accessToken)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);l.rateLimited&&i("rate limited"),e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=L.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(N.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new at(this,N.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new at(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=N;if(s&&[a,c,l,u].indexOf(o)>=0&&s!==this._joinRef())return;let d=this._onMessage(o,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var p,_,g;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(_=f.filter)===null||_===void 0?void 0:_.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(d,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,_,g,w,b,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const k=f.id,U=(p=f.filter)===null||p===void 0?void 0:p.event;return k&&((_=t.ids)===null||_===void 0?void 0:_.includes(k))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const k=(b=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((E=t==null?void 0:t.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:_,table:g,commit_timestamp:w,type:b,errors:E}=p;d=Object.assign(Object.assign({},{schema:_,table:g,commit_timestamp:w,eventType:b,new:{},old:{},errors:E}),this._getPayloadRecords(p))}f.callback(d,s)})}_isClosed(){return this.state===L.closed}_isJoined(){return this.state===L.joined}_isJoining(){return this.state===L.joining}_isLeaving(){return this.state===L.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&It.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(N.close,{},e)}_onError(e){this._on(N.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=L.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ts(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ts(e.columns,e.old_record)),t}}const Pn=()=>{};class Cn{constructor(e,t){var s,n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=yn,this.params={},this.timeout=Es,this.transport=mn.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Pn,this.conn=null,this.sendBuffer=[],this.serializer=new kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this._resolveFetch=a=>{let c;return a?c=a:typeof fetch>"u"?c=(...l)=>De(()=>Promise.resolve().then(()=>Ne),void 0).then(({default:u})=>u(...l)):c=fetch,(...l)=>c(...l)},this.endPoint=`${e}/${gt.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i));const o=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;o&&(this.accessToken=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,c)=>c(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new js(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case je.connecting:return Y.Connecting;case je.open:return Y.Open;case je.closing:return Y.Closing;default:return Y.Closed}}isConnected(){return this.connectionState()===Y.Open}channel(e,t={config:{}}){const s=new It(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e;let o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};if(this.log("push",`${t} ${s} (${i})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(s)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(N.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bn}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(s)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(N.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(wn,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Lt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function I(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Rn extends Lt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class is extends Lt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var An=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const Cs=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>De(()=>Promise.resolve().then(()=>Ne),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},In=()=>An(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield De(()=>Promise.resolve().then(()=>Ne),void 0)).Response:Response});var ye=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const ct=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ln=(r,e)=>ye(void 0,void 0,void 0,function*(){const t=yield In();r instanceof t?r.json().then(s=>{e(new Rn(ct(s),r.status||500))}).catch(s=>{e(new is(ct(s),s))}):e(new is(ct(r),r))}),xn=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};function et(r,e,t,s,n,i){return ye(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,xn(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Ln(c,a))})})}function vt(r,e,t,s){return ye(this,void 0,void 0,function*(){return et(r,"GET",e,t,s)})}function G(r,e,t,s,n){return ye(this,void 0,void 0,function*(){return et(r,"POST",e,s,n,t)})}function Un(r,e,t,s,n){return ye(this,void 0,void 0,function*(){return et(r,"PUT",e,s,n,t)})}function Rs(r,e,t,s,n){return ye(this,void 0,void 0,function*(){return et(r,"DELETE",e,s,n,t)})}var D=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const Dn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},os={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nn{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Cs(n)}uploadOrUpdate(e,t,s,n){return D(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},os),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return u.ok?{data:{path:c},error:null}:{data:null,error:yield u.json()}}catch(i){if(I(i))return{data:null,error:i};throw i}})}upload(e,t,s){return D(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return D(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:os.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u});return h.ok?{data:{path:i},error:null}:{data:null,error:yield h.json()}}catch(c){if(I(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e){return D(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield G(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new Lt("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(I(t))return{data:null,error:t};throw t}})}update(e,t,s){return D(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return D(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}})}copy(e,t){return D(this,void 0,void 0,function*(){try{return{data:{path:(yield G(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return D(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield G(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return D(this,void 0,void 0,function*(){try{const n=yield G(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}})}download(e,t){return D(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield vt(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(I(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${l}`)}}}remove(e){return D(this,void 0,void 0,function*(){try{return{data:yield Rs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(I(t))return{data:null,error:t};throw t}})}list(e,t,s){return D(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Dn),t),{prefix:e||""});return{data:yield G(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Fn="2.5.4",qn={"X-Client-Info":`storage-js/${Fn}`};var ce=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};class Mn{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},qn),t),this.fetch=Cs(s)}listBuckets(){return ce(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(I(e))return{data:null,error:e};throw e}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(I(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ce(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return ce(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(I(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Rs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(I(t))return{data:null,error:t};throw t}})}}class Bn extends Mn{constructor(e,t={},s){super(e,t,s)}from(e){return new Nn(this.url,this.headers,e,this.fetch)}}const zn="2.38.0";let Te="";typeof Deno<"u"?Te="deno":typeof document<"u"?Te="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Te="react-native":Te="node";const Jn={"X-Client-Info":`supabase-js-${Te}/${zn}`};var Gn=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const Kn=r=>{let e;return r?e=r:typeof fetch>"u"?e=Rt:e=fetch,(...t)=>e(...t)},Hn=()=>typeof Headers>"u"?Ct.Headers:Headers,Vn=(r,e,t)=>{const s=Kn(t),n=Hn();return(i,o)=>Gn(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:r;let l=new n(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:l}))})};function Wn(r){return r.replace(/\/$/,"")}function Qn(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:o,auth:a,realtime:c,global:l}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),n),global:Object.assign(Object.assign({},l),i)}}function Xn(r){return Math.round(Date.now()/1e3)+r}function Yn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const M=()=>typeof document<"u",Q={tested:!1,writable:!1},Ce=()=>{if(!M())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Q.tested)return Q.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Q.tested=!0,Q.writable=!0}catch{Q.tested=!0,Q.writable=!1}return Q.writable};function lt(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const As=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>De(()=>Promise.resolve().then(()=>Ne),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Zn=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",le=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Be=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ut=async(r,e)=>{await r.removeItem(e)};function ei(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,o,a,c,l,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)o=e.indexOf(r.charAt(u++)),a=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),s=o<<2|a>>4,n=(a&15)<<4|c>>2,i=(c&3)<<6|l,t=t+String.fromCharCode(s),c!=64&&n!=0&&(t=t+String.fromCharCode(n)),l!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class tt{constructor(){this.promise=new tt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}tt.promiseConstructor=Promise;function as(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(ei(s))}async function ti(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function si(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function ri(r){return("0"+r.toString(16)).substr(-2)}function $e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,ri).join("")}async function ni(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function ii(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Se(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ni(r);return ii(t)}class xt extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function m(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class oi extends xt{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function ai(r){return m(r)&&r.name==="AuthApiError"}class Is extends xt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class be extends xt{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ue extends be{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ht extends be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class ze extends be{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Je extends be{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cs extends be{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yt extends be{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function ls(r){return m(r)&&r.name==="AuthRetryableFetchError"}var ci=globalThis&&globalThis.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Ee=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),li=[502,503,504];async function us(r){if(!Zn(r))throw new yt(Ee(r),0);if(li.includes(r.status))throw new yt(Ee(r),r.status);let e;try{e=await r.json()}catch(t){throw new Is(Ee(t),t)}throw new oi(Ee(e),r.status||500)}const ui=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function v(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await hi(r,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function hi(r,e,t,s,n,i){const o=ui(e,s,n,i);let a;try{a=await r(t,o)}catch(c){throw console.error(c),new yt(Ee(c),0)}if(a.ok||await us(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await us(c)}}function J(r){var e;let t=null;_i(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Xn(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function K(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function di(r){return{data:r,error:null}}function fi(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=ci(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function pi(r){return r}function _i(r){return r.access_token&&r.refresh_token&&r.expires_in}var gi=globalThis&&globalThis.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class mi{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=As(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await v(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(m(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await v(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:K})}catch(s){if(m(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=gi(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await v(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:fi,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(m(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await v(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:K})}catch(t){if(m(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await v(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:pi});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);l[`${g}Page`]=_}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(m(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await v(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:K})}catch(t){if(m(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await v(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:K})}catch(s){if(m(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await v(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:K})}catch(s){if(m(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await v(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(m(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await v(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(m(t))return{data:null,error:t};throw t}}}const Ls="2.55.0",vi="http://localhost:9999",yi="supabase.auth.token",bi={"X-Client-Info":`gotrue-js/${Ls}`},hs=10,wi={getItem:r=>Ce()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Ce()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Ce()&&globalThis.localStorage.removeItem(r)}};function ds(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function ki(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}globalThis&&Ce()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class $i extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}ki();const Si={url:vi,storageKey:yi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bi,flowType:"implicit",debug:!1},Oe=30*1e3,fs=3;async function Oi(r,e,t){return await t()}class Le{constructor(e){var t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Le.nextInstanceID,Le.nextInstanceID+=1,this.instanceID>0&&M()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Si),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=As(s.fetch),this.lock=s.lock||Oi,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ce()?this.storage=wi:(this.memoryStorage={},this.storage=ds(this.memoryStorage)):(this.memoryStorage={},this.storage=ds(this.memoryStorage)),M()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ls}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=M()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),await this._removeSession(),{error:s};const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return m(e)?{error:e}:{error:new Is("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,s,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;if(this.flowType==="pkce"){const _=$e();await le(this.storage,`${this.storageKey}-code-verifier`,_),f=await Se(_),p=_===f?"plain":"s256"}i=await v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:J})}else if("phone"in e){const{phone:u,password:h,options:d}=e;i=await v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(n=d==null?void 0:d.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:J})}else throw new ze("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(m(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:J})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:J})}else throw new ze("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ht}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:{user:s.user,session:s.session},error:n})}catch(t){if(m(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Be(this.storage,`${this.storageKey}-code-verifier`),{data:s,error:n}=await v(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:J});return await ut(this.storage,`${this.storageKey}-code-verifier`),n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ht}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:n})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,a=await v(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:J}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ht}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(m(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:c}=e;let l=null,u=null;if(this.flowType==="pkce"){const d=$e();await le(this.storage,`${this.storageKey}-code-verifier`,d),l=await Se(d),u=d===l?"plain":"s256"}const{error:h}=await v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ze("You must provide either an email or phone number.")}catch(a){if(m(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await v(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:J});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(m(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{return await this._removeSession(),await v(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:di})}catch(i){if(m(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ue;const{error:n}=await v(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(m(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await v(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:a}=await v(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ze("You must provide either an email or phone number and a type")}catch(t){if(m(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Be(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:K}):await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0,xform:K})})}catch(t){if(m(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new ue;const o=n.session;let a=null,c=null;if(this.flowType==="pkce"&&e.email!=null){const h=$e();await le(this.storage,`${this.storageKey}-code-verifier`,h),a=await Se(h),c=h===a?"plain":"s256"}const{data:l,error:u}=await v(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:K});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(m(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return as(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ue;const t=Date.now()/1e3;let s=t,n=!0,i=null;const o=as(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(m(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ue;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(m(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!M())throw new Je("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Je("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new cs("Not a valid PKCE flow url.");const t=lt(window.location.href);if(e){if(!t.code)throw new cs("No code detected.");const{data:b,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Je(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=t;if(!i||!a||!o||!l)throw new Je("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;c&&(d=parseInt(c));const f=d-u;f*1e3<=Oe&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,d,u);const{data:_,error:g}=await this._getUser(i);if(g)throw g;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:l,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(t){if(m(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=lt(window.location.href);return!!(M()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=lt(window.location.href),t=await Be(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ai(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ut(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Yn(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;if(this.flowType==="pkce"){const i=$e();await le(this.storage,`${this.storageKey}-code-verifier`,i),s=await Se(i),n=i===s?"plain":"s256"}try{return await v(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(m(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await si(async n=>(await ti(n*200),this._debug(t,"refreshing attempt",n),await v(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:J})),(n,i,o)=>o&&o.error&&ls(o.error)&&Date.now()+(n+1)*200-s<Oe)}catch(s){if(this._debug(t,"error",s),m(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),M()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Be(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+hs;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${hs}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ls(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new tt;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ue;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),m(i)){const o={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),le(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ut(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&M()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oe);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Oe);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Oe}ms, refresh threshold is ${fs} ticks`),n<=fs&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $i)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!M()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const s=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const n=$e();await le(this.storage,`${this.storageKey}-code-verifier`,n);const i=await Se(n),o=n===i?"plain":"s256";this._debug("PKCE","code verifier",`${n.substring(0,5)}...`,"code challenge",i,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(t!=null&&t.queryParams){const n=new URLSearchParams(t.queryParams);s.push(n.toString())}return`${this.url}/authorize?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await v(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(m(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:c}=await v(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((n=a==null?void 0:a.totp)===null||n===void 0)&&n.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(m(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await v(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(m(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await v(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(m(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}Le.nextInstanceID=0;class Ti extends Le{constructor(e){super(e)}}var Ei=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const ji={headers:Jn},Pi={schema:"public"},Ci={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ri={};class Ai{constructor(e,t,s){var n,i,o,a,c,l,u,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=Wn(e);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Pi,realtime:Ri,auth:Object.assign(Object.assign({},Ci),{storageKey:f}),global:ji},_=Qn(s??{},p);this.storageKey=(i=(n=_.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=_.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=_.auth)!==null&&c!==void 0?c:{},this.headers,(l=_.global)===null||l===void 0?void 0:l.fetch),this.fetch=Vn(t,this._getAccessToken.bind(this),(u=_.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},_.realtime)),this.rest=new At(`${d}/rest/v1`,{headers:this.headers,schema:(h=_.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Br(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Bn(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ei(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:a},c,l){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ti({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,debug:a,fetch:l})}_initRealtimeClient(e){return new Cn(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ii=(r,e,t)=>new Ai(r,e,t),Li="https://asjwavyyteokxtqowcje.supabase.co",xi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzandhdnl5dGVva3h0cW93Y2plIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTE4MDA5MTEsImV4cCI6MjAwNzM3NjkxMX0.kpXB-MBabzl6_febFqjbR4kCF41FgDYRPcrRmM2daeQ",Ui=Ii(Li,xi);function ps(r){let e,t,s;return{c(){e=$("button"),e.textContent="견적서 작성 시작",S(e,"type","button"),S(e,"class","pode-btn netural")},m(n,i){R(n,e,i),t||(s=Re(e,"click",r[1]),t=!0)},p:j,d(n){n&&C(e),t=!1,s()}}}function Di(r){let e,t,s;return{c(){e=$("div"),S(e,"slot","backdrop"),S(e,"class","backdrop svelte-1xz6zdk")},m(n,i){R(n,e,i),t||(s=Re(e,"click",jt),t=!0)},p:j,d(n){n&&C(e),t=!1,s()}}}function Ni(r){let e,t,s,n,i,o,a,c,l,u=r[0]&&ps(r);return c=new kr({props:{$$slots:{backdrop:[Di]},$$scope:{ctx:r}}}),{c(){e=$("main"),t=$("p"),t.innerHTML='Check out <a href="https://github.com/sveltejs/kit#readme" target="_blank" rel="noreferrer">SvelteKit</a>, the official Svelte app framework powered by Vite!',s=x(),n=$("p"),n.textContent="Click on the Vite and Svelte logos to learn more",i=x(),u&&u.c(),o=x(),a=x(),me(c.$$.fragment),S(n,"class","read-the-docs")},m(h,d){R(h,e,d),y(e,t),y(e,s),y(e,n),y(e,i),u&&u.m(e,null),y(e,o),R(h,a,d),ne(c,h,d),l=!0},p(h,[d]){h[0]?u?u.p(h,d):(u=ps(h),u.c(),u.m(e,o)):u&&(u.d(1),u=null);const f={};d&32&&(f.$$scope={dirty:d,ctx:h}),c.$set(f)},i(h){l||(T(c.$$.fragment,h),l=!0)},o(h){P(c.$$.fragment,h),l=!1},d(h){h&&(C(e),C(a)),u&&u.d(),ie(c,h)}}}function Fi(r,e,t){let s=null,n=null,i=null,o=null;$s(async()=>{if(document.getElementById("pode-user")&&(n=document.getElementById("pode-user").value),document.getElementById("pode-product-no")&&(s=parseInt(document.getElementById("pode-product-no").value)),document.getElementById("pode-mode")&&(i=document.getElementById("pode-mode").value),i==="product"){const{data:c,error:l}=await Ui.from("template_product").select().eq("user_id",n).eq("product->product_no",s).single();if(l)return;t(0,o=c.product)}});function a(){Os(Lr,{product:o})}return[o,a]}class qi extends Ue{constructor(e){super(),xe(this,e,Fi,Ni,ve,{})}}new qi({target:document.getElementById("podiz-estimate")});
